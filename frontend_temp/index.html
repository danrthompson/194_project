<html ng-app="checkmail">
	<head>
		<title>CheckMail</title>

		<link rel="stylesheet" href="css/checkmail.css">
	</head>
	<body ng-controller="AppCtrl">
		<header>
			<div class="navbar navbar-default navbar-static-top">
				<!-- Navbar label navigation -->
				<div class="navbar-left-side">
					<ul class="nav navbar-nav quick-nav-labels">
						<li ng-repeat="board in boards"><a href="#board-{{ $index }}" scroll-on-click>{{ board.title }}</a></li>
				    </ul>
				</div>

		    	<!-- Navbar logo and extras -->
		    	<!-- Help and settings -->
			    <div class="navbar-right-side">
			    	<button class="btn navbar-btn btn-sm btn-inverted-success" ng-click="compose_active = !compose_active">Compose</button>
			    	<!-- <button type="button" data-toggle="modal" data-target="#myModal">Test Modal</button> -->
			    	<ul class="nav navbar-nav pull-right">
					 	<!-- <li><a href="#" ><i class="ion-ios7-help"></i></a></li> -->

					 	<li><a href="#" type="button" data-toggle="modal" data-target="#myModal" ><i class="ion-ios7-help"></i></a></li>

			    		<li><a href="#"><i class="ion-ios7-gear"></i></a></li>
			    		<li><a href="#" class="navbar-brand"><img src="img/logo.svg" height="19" alt=""></a></li>
			    	</ul>
			    </div>
			</div>
		</header>

		<!-- Workspace -->
		<section class="workspace" ng-class="{true: 'sidebar-active', false: 'sidebar-inactive'}[selected_thread != null]">

			<!-- Email column container: All Email Lists -->
			<div class="email-columns" style="width: {{workspace_width}}px;">

				<div class="scroll-wrapper">
					<!-- Individual email column -->
					<!-- DH: The column has the class "email-column-fixed-left" if
					its label is "Inbox" right now. This should be enough to get
					you started.-->
					<div id="board-{{ $index }}"
						 class="email-column" 
					     ng-repeat="board in boards"
					     ng-class="{true: 'email-column-fixed-left'}[board.title == 'Inbox']">
					

						<!-- Email panel -->
						<div class="panel panel-email">
					
							<!-- Panel heading -->
							<div class="panel-heading email-heading">
								<h4 class="email-label">{{ board.title }}</h4>
								<ul class="email-column-decorations">
									<li><a href="#"><i class="shared-icon ion-ios7-people"></i></a></li>
									<li><a href="#"><i class="shared-icon ion-ios7-arrow-down"></i></a></li>
								</ul>
							</div>
						
							<!-- Email group -->
						  	<ul ui-sortable="emailGroupSortableOptions" ng-model="board" class="list-group email-group">
					
						  		<!-- Email-item -->
						  		<!-- TODO: This ng-class expression should be refactored into a method within the controller -->
							    <li class="list-group-item email-item" 
							    	ng-class="{true: 'selected'}[thread==selected_thread] + ' ' +
							    			  {true: 'completed'}[thread.is_complete] + ' ' +
							    			  {true: 'highlighted'}[thread.is_highlighted && !thread == selected_thread] + ' ' +
							    			  {true: 'todos-open'}[thread.todos_open] + ' ' +
							    			  {false: 'unread'}[thread.is_read] + ' ' +
						    			  {true: 'no-todos'}[thread.todos == 0]"
							    	ng-repeat="thread in board.threads">
					
							    	<!-- Email metadata -->
							    	<div class="email-item-content"
							    		 ng-dblclick="selectThread(thread);"
							    		 ng-click="toggleHighlight(thread); toggleTodos(thread);">
					
							    		<a href="#" class="todo-indicator">
							    			<!-- The "skin" is the angled color. The "tally" is the... tally. You guessed it. -->
							    			<div class="todo-indicator-skin"></div>
							    			<div class="todo-indicator-tally">{{ thread.todos.length }}</div>
							    		</a>
					
							    		<!-- Sender, timestamp, and subject -->
										<div class="email-item-metadata">
											<div class="sender-and-date">
											<h5 class="email-sender"><span class="sender-name">{{ thread.emails[0].sender }}</span></h5><small class="email-datetime">{{ thread.emails[0].timestamp }}</small></div>
											<span class="email-subject">{{ thread.emails[0].subject }}</span>
										</div>
							    	</div>

									<!-- Tasks associated with email -->
									<div ui-sortable ng-model="thread.todos" class="list-group email-todo-list">
										<a href="#" 
										   class="list-group-item email-todo-item" 
										   ng-class="{true: 'completed', false: 'incomplete'}[todo.completed]"
										   ng-click="todo.completed = !todo.completed"
										   ng-repeat="todo in thread.todos">
										   {{ todo.action }}
									   	</a>
										
										<input type="text" 
											   class="list-group-item add-email-todo-item" 
											   placeholder="Add a todo item..."
											   ng-model="email.todo_temp"
											   enter-submit="addTodo(thread)">
									</div>
							    </li>
						  	</ul>
						</div>
					</div>
				</div>

			</div>
			
			<!-- Drag To Trash -->
			<div class="trashcan" ng-class="{true: 'sidebar-active', false: 'sidebar-inactive'}[selected_thread != null]">
				<a href="" class="trashcan-icon" ng-click="selected_thread = null"></a>
			</div>

			
		</section>

		<!-- Sidebar -->
		<section class="sidebar email-viewer" ng-class="{true: 'sidebar-active', false: 'sidebar-inactive'}[selected_thread != null]">

			<!-- Just a placeholder For A Thread -->
			<div class="panel panel-thread thread-message" ng-repeat="email in selected_thread.emails">
				<div class="panel-heading thread-message-heading">
					

					<div class="message-reply-icons ionicons">
						<a href="" class="reply-icon"></a>
						<a href="" class="replyall-icon"></a>
						<a href="" class="fwd-icon"></a>
					</div>
					<h4 class="thread-message-title">{{ selected_thread.subject }}</h3>
					<ul class="thread-title-subtext">
						<li>
							To: <span class="thread-message-to thread-title-subtext">{{ email.receiver }}</span>
						</li>
						<li>
							From: <span class="thread-message-from thread-title-subtext">{{ email.sender }}</span>
							<span class="thread-message-date"> at {{ email.timestamp }}</span>
						</li>
					</ul>


					<!-- <p>To: <span class="thread-message-to thread-title-subtext">dant@stanford.edu, sara@squarespace.com</span></p>
					<p>From: <span class="thread-message-from thread-title-subtext">Daniel Haarburger</span></p> -->
					<hr>
				</div>
  				<div class="panel-body">
				<p>{{ email.message }}</p>
  				</div>
			</div>


			<div class="quick-reply-wrapper" ng-class="{true: 'qr-compressed', false:'qr-expanded'}[qr_state]">
				<div class="panel panel-thread quick-reply" >

					<!-- Quick Replay toggles between qr-compressed and qr-expanded -->
					<form class="quick-reply-form" action="">
						<div class="quick-reply-textarea">
							<textarea class="form-control" rows="1" ng-model="current_response"></textarea>
						</div>
						<div class="quick-reply-submit">
							<button type="submit" class="btn btn-success btn-block" ng-click="addReply(current_response);">Submit</button>
						</div>
						<div class="quick-reply-cancel">
							<button type="reset" class="btn btn-default btn-block">Clear</button>
						</div>
					</form>
				</div>

			
				<!-- When this button is pressed it should toggle the class of the wrapper  -->
				<a href="" class="qr-expand" ng-click="qr_state = !qr_state"><span ng-bind="{true: 'Expand', false:'Compress'}[qr_state]"></span> Quick Reply</a>
			</div>
			

		</section>


		<!-- 
			Separate Sidebar For Composing Emails
			In the actual app, we'll just swap out the content of the
			existing sidebar (adding a textarea for composing emails)
			but for the time being, this hack will make it easy to show
			and hide the compose-email field.
		 -->
		<!-- <section class="sidebar email-viewer" ng-class="{true: 'sidebar-inactive', false: 'sidebar_active'}[!sidebar_active]" > -->
		<section class="sidebar email-viewer compose-email" ng-class="{true: 'dont-show-me'}[!compose_active]">
			<!-- Just a placeholder For A Thread -->
			<div class="panel panel-thread thread-message">
				

			<div class="quick-reply-wrapper compose-email-wrapper qr-expanded">
			
				<div class="panel panel-thread quick-reply" >

					<!-- Quick Replay toggles between qr-compressed and qr-expanded -->
					<form class="quick-reply-form compose-email-form" action="">
						<div class="quick-reply-input compose-email-metadata">
							<div class="compose-field input-group input-group-sm">
								<span class="input-group-addon">To</span>
								<input class="form-control" type="text"></input>
							</div>
							<div class="compose-field input-group input-group-sm">
								<span class="input-group-addon">From</span>
								<input class="form-control input-group" type="text"></input>
							</div>
							<div class="compose-field input-group input-group-sm">
								<span class="input-group-addon">Subject</span>
								<input class="form-control" type="text"></input>
							</div>
						</div>
							<div class="quick-reply-input">
								<textarea class="form-control" rows="3" placeholder="Compose a new email..."></textarea>
							</div>
						<div class="quick-reply-input">
							<textarea class="form-control" rows="3" placeholder="Compose a new email..."></textarea>
						</div>
						<div class="quick-reply-submit">
							<button type="submit" class="btn btn-success btn-block" ng-click="compose_active = false">Send</button>
						</div>
						<div class="quick-reply-cancel">
							<button type="reset" class="btn btn-default btn-block" ng-click="compose_active = false">Cancel</button>
						</div>
					</form>
				</div>

			
				<!--  -->
			</div>
			

		</section>

		<!-- <section class="full-screen-modal dont-show modal" id="help-modal"> -->
		<!-- <section class="full-screen-modal modal" id="help-modal">

			<div class="modal-content"

		</section> -->
		<!-- Modal -->
		<!-- Modal -->
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		        <h4 class="modal-title" id="myModalLabel">About CheckMail</h4>
		      </div>
		      <div class="modal-body">
		        Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Maecenas faucibus mollis interdum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec ullamcorper nulla non metus auctor fringilla.
				<br>
				<br>
				Donec id elit non mi porta gravida at eget metus. Sed posuere consectetur est at lobortis. Integer posuere erat a ante venenatis dapibus posuere velit aliquet. Donec sed odio dui. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.
		      </div>
		      <div class="modal-footer">
		        <!-- <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> -->
		        <button type="button" class="btn btn-success">Cool, Thanks!</button>
		      </div>
		    </div>
		  </div>
		</div>



		<!-- JAVASCRIPT -->

		<!-- jQuery -->
	  	<script src="js/third-party/jquery.min.js"></script>
		<script src="js/third-party/jquery-ui.js"></script>

		<!-- Angular -->
		<script src="js/third-party/angular.js"></script>
		<script src="js/third-party/ui-sortable.js"></script>

		<!-- Bootstrap JS for Modals -->
		<script src="js/third-party/bootstrap-modal.js"></script>


		<!-- App -->
		<script src="js/app.js"></script>
	</body>
</html>